<!DOCTYPE html>
<html lang="fr" xmlns:th="http://wwww.thymeleaf.org" data-th-replace="~{layout/layout :: layout(contenuPage=~{:: .container}
                                                                        , titrePage=~{:: title}
                                                                        , ressources=~{})}">
<head>
    <!-- Accueil comme titre de page -->
    <title data-th-text="#{index.title}"></title>
</head>

<body>
    <main class="container my-3">
        <h1 style="text-align: center" data-th-text="#{index.h1}">Liste des enchères</h1>

        <!-- Fenêtre de filtrage -->
        <div class="row my-3">
            <div class="col-md-5 customBox">
                <div class="d-flex align-items-center mb-2">
                    <label for="search-bar" class="me-2 fw-bold" data-th-text="#{filter.label}">:</label>
                    <input type="text" id="search-bar" data-th-placeholder="#{filter.placeholder}" class="form-control">
                </div>
                <!-- Recherche par catégorie : les données seront récupérées depuis la session plus tard, pour l'instant elles sont statiques -->
                <div class="d-flex align-items-center mb-2">
                    <label for="category-select" class="me-2 fw-bold" data-th-text="#{filter.category}">:</label>
                    <select id="category-select" class="form-select">
                        <option value="" data-th-text="#{filter.all_categories}"></option>
                        <option value="1" data-th-text="#{filter.electronics}"></option>
                        <option value="2" data-th-text="#{filter.clothing}"></option>
                        <option value="3" data-th-text="#{filter.home}"></option>
                    </select>
                </div>
                <div class="d-flex">
                    <button id="search-btn" class="btn btn-primary me-2" data-th-text="#{filter.search_button}"></button>
                    <button id="reset-btn" class="btn btn-secondary" data-th-text="#{filter.reset_button}"></button>
                </div>
            </div>
            <div class="col-md-2"></div>
            <div class="col-md-5 customBox legende">
                <div class="d-flex justify-content-center">
                    <h5 data-th-text="#{index.legend.h5}"></h5>
                </div>
                <div class="d-flex justify-content-evenly">
                    <div>
                        <img data-th-src="@{/images/dollar-green.png}" alt="" height="30" width="30" class="mx-2"><span data-th-text="#{index.legend.ongoing}"></span>
                    </div>
                    <div>
                        <img data-th-src="@{/images/dollar-red.png}" alt="" height="30" width="30" class="mx-2"><span data-th-text="#{index.legend.finishd}"></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="row my-3">
            <!--ajouté "data-th-attr" pour js-->
        <div data-th-each="item : ${articleAVendreList}" class="col-lg-4 col-md-6 col-sm-12 p-3">
            <div class="card customZoom" data-th-attr="data-category=${item.categorie}">
           <!--     <div class="card" data-th-attr="data-category=${article.categorie.no_categorie}">-->

                <div class="card-body">
                    <div class="row">
                        <div class="col-10">
                            <h5 class="card-title" data-th-text="${item.nom_article}"></h5>
                        </div>
                        <div class="col-2">
                            <th:block data-th-if="${item.prix_vente == 0}">
                                <a data-th-href="@{/articles/detail_enchere/{id}(id=${item.no_article})}"><img data-th-src="@{/images/dollar-green.png}" alt="" height="30" width="30"></a>
                            </th:block>
                            <th:block data-th-if="${item.prix_vente != 0}">
                                <a data-th-href="@{/articles/detail_enchere/{id}(id=${item.no_article})}"><img data-th-src="@{/images/dollar-red.png}" alt="" height="30" width="30"></a>
                            </th:block>
                        </div>
                    </div>
                    <div class="card-text">
                        <span>Prix de départ : <span data-th-text="${item.prix_initial}"></span >€</span><br>
                        <th:block data-th-if="${item.meilleure_offre == 0}">
                            <span>Offre actuelle : Pas d'offres pour l'instant.</span>
                        </th:block>
                        <th:block data-th-if="${item.meilleure_offre != 0}">
                            <span>Offre actuelle : <span data-th-text="${item.meilleure_offre}"></span>€</span>
                        </th:block>
                        <p>
                            Fin de l'enchère : <span data-th-text="${#temporals.format(item.date_fin_encheres, 'dd/MM/yyyy')}"></span>
                            <br>
                            Vendeur :
                            <a th:href="@{/utilisateurs/public/profil/{pseudo}(pseudo=${item.vendeur.Pseudo})}"
                               th:if="${#authorization.expression('isAuthenticated()')}"
                               th:text="${item.vendeur.pseudo}"></a>
                            <span th:if="${!#authorization.expression('isAuthenticated()')}"
                                  th:text="${item.vendeur.pseudo}"></span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        </div>



    </main>

</body>
</html>