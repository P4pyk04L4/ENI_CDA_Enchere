<!DOCTYPE html>
<html lang="fr" xmlns:th="http://wwww.thymeleaf.org" data-th-replace="~{layout/layout :: layout(contenuPage=~{:: .container}
                                                                        , titrePage=~{:: title}
                                                                        , ressources=~{})}">
<head>
    <!-- Accueil comme titre de page -->
    <title>Enchères</title>
</head>

<body>
    <main class="container my-3">
        <h1 style="text-align: center">Liste des enchères</h1>

        <!-- Fenêtre de filtrage -->
        <div class="row my-3">
            <div class="col-md-6">
                <div class="d-flex align-items-center mb-2">
                    <label for="search-bar" class="me-2 fw-bold">Filtre:</label>
                    <input type="text" id="search-bar" placeholder="Le nom de l'article..." class="form-control">
                </div>
                <!-- Recherche par catégorie : les données seront récupérées depuis la session plus tard, pour l'instant elles sont statiques -->
                <div class="d-flex align-items-center mb-2">
                    <label for="category-select" class="me-2 fw-bold">Catégorie:</label>
                    <select id="category-select" class="form-select">
                        <option value="">Toutes les catégories</option>
                        <option value="1">Électronique</option>
                        <option value="2">Vêtements</option>
                        <option value="3">Maison</option>
                    </select>
                </div>
                <div class="d-flex">
                    <button id="search-btn" class="btn btn-primary me-2">Rechercher</button>
                    <button id="reset-btn" class="btn btn-secondary">Annuler</button>
                </div>
            </div>
        </div>

        <div class="row my-3">
            <!--ajouté "data-th-attr" pour js-->
        <div data-th-each="item : ${articleAVendreList}" class="col-lg-4 col-md-6 col-sm-12 p-3">
            <div class="card" data-th-attr="data-category=${item.categorie}">
           <!--     <div class="card" data-th-attr="data-category=${article.categorie.no_categorie}">-->

                <div class="card-body">
                    <div class="row">
                        <div class="col-10">
                            <h5 class="card-title" data-th-text="${item.nom_article}"></h5>
                        </div>
                        <div class="col-2">
                            <a data-th-href="@{/articles/detail_enchere/{id}(id=${item.no_article})}"><img data-th-src="@{/images/dollar-symbol.png}" alt="" height="30" width="30"></a>
                        </div>
                    </div>
                    <div class="card-text">
                        <p>Prix : <span data-th-text="${item.prix_initial}"></span>€<br>
                            Fin de l'enchère : <span data-th-text="${#temporals.format(item.date_fin_encheres, 'dd/MM/yyyy')}"></span>
                            <br>
                            Vendeur :
                            <a th:href="@{/utilisateurs/public/profil/{pseudo}(pseudo=${item.vendeur.Pseudo})}"
                               th:if="${#authorization.expression('isAuthenticated()')}"
                               th:text="${item.vendeur.pseudo}"></a>
                            <span th:if="${!#authorization.expression('isAuthenticated()')}"
                                  th:text="${item.vendeur.pseudo}"></span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        </div>



    </main>

</body>
</html>